@startuml activity-diagram
|User|
start
:Compose message;
|React SPA|
:POST /api/message;
|Flask API|
:Validate JWT;
if (authorised?) then (yes)
  :Insert into DB;
  |Socket.IO GW|
  :emit 'message:new' (room id);
  |React SPA|
  :Render MessageBubble;
else (no)
  :HTTP 401;
endif
stop
@enduml
