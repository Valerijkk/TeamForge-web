@startuml ComponentDiagram
' -------- style ----------
skinparam componentStyle rectangle
skinparam shadowing false
skinparam linetype ortho
skinparam arrowColor #777777
' -------- Nodes ----------
package "Frontend" {
  [React SPA] as SPA <<Browser>>
}

package "Backend" {
  [Flask API] as API <<Python>>
  [Socket.IO Gateway] as SIO <<Python>>
  [Celery Worker] as WKR <<Python>>
}

database "RDBMS" {
  [SQLite / PostgreSQL] as DB
}

package "Infrastructure" {
  [Redis] <<Cache>>
  [TURN (coturn)] as TURN <<Server>>
}

' --------- Relations ---------
SPA -[#green]-> API : REST\n(JSON + JWT)
SPA ..[#green].. SIO : WebSocket\n(Socket.IO)
API --> DB : SQLAlchemy
SIO --> DB : read/write
API --> Redis : task queue
WKR --> Redis : consume
WKR --> DB : update\n(reminders)
SIO ..> TURN : ICE/STUN\nfallback

' legend
legend right
  <b>Legend</b>
  green line  = real-time user traffic
  grey line   = internal traffic
endlegend
@enduml
